<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>脳トレお題表示アプリ</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 { font-size: 1.5em; }
    button {
      font-size: 1.2em;
      padding: 10px 20px;
      margin: 5px;
    }
    #odai {
      margin: 30px 0;
      font-size: 2em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>脳トレお題表示アプリ</h1>
  <div>
    <label>カテゴリー選択：</label>
    <select id="category">
      <option value="all">混合</option>
      <option value="noun">名詞</option>
      <option value="adj">形容詞・感覚表現</option>
    </select>
    <button onclick="nextOdai()">次のお題</button>
    <button onclick="hideOdai()">本人に渡す（隠す）</button>
    <button onclick="resetUsed()">使用済みクリア</button>
  </div>
  <div id="odai">お題がここに表示されます</div>

  <div>
    <label>お題を追加：</label>
    <input type="text" id="customInput" placeholder="新しいお題">
    <button onclick="addCustomOdai()">追加</button>
  </div>

  <script>
    const nouns = ["りんご", "新聞", "テレビ", "病院", "花火", "こたつ", "バス", "電話", "お寿司", "海", "山"];
    const adjs = ["甘い", "苦い", "寒い", "痛い", "眠い", "重い", "速い", "遅い", "熱い", "冷たい", "かわいい", "うるさい"];

    let used = JSON.parse(localStorage.getItem("usedOdai") || "[]");
    let custom = JSON.parse(localStorage.getItem("customOdai") || "[]");

    function getPool() {
      const category = document.getElementById("category").value;
      let pool = [];
      if (category === "noun") pool = nouns;
      else if (category === "adj") pool = adjs;
      else pool = nouns.concat(adjs);
      pool = pool.concat(custom);
      return pool.filter(o => !used.includes(o));
    }

    function nextOdai() {
      const pool = getPool();
      if (pool.length === 0) {
        document.getElementById("odai").textContent = "お題がもうありません (クリアしてください)";
        return;
      }
      const odai = pool[Math.floor(Math.random() * pool.length)];
      document.getElementById("odai").textContent = odai;
      used.push(odai);
      localStorage.setItem("usedOdai", JSON.stringify(used));
    }

    function hideOdai() {
      document.getElementById("odai").textContent = "(本人にはお題を見せない)";
    }

    function resetUsed() {
      used = [];
      localStorage.removeItem("usedOdai");
      alert("使用済みリストをクリアしました");
    }

    function addCustomOdai() {
      const val = document.getElementById("customInput").value.trim();
      if (val) {
        custom.push(val);
        localStorage.setItem("customOdai", JSON.stringify(custom));
        document.getElementById("customInput").value = "";
        alert("追加しました: " + val);
      }
    }
  </script>
</body>
</html>

